<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="layout/layout">
<head>
    <title>관리자 설정</title>
</head>
<body class="adminBody">
<th:block layout:fragment="content">
    <div class="adContent">
        <h1 class="adH1">SMS관리</h1>
        <div class="content-in clearfix">
            <div class="clearfix">
                <form name="form1" class="formF">
                    <input type="hidden" id="page" name="page" th:value="${params.page}">
                    <div class="formWrap formWrap2">
                        <table class="formLeft">
                            <tbody>
                            <tr>
                                <td class="formTit"><label for="startDate" class="">조회시작일자</label></td>
                                <td>
                                    <div class="datepickerWrap">
                                        <input type="text" name="startDate" id="startDate" class="input-df datepicker" th:value="${params.startDate}"/>
                                        <i class="i-date"></i>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <table class="formRight">
                            <tbody>
                            <tr>
                                <td class="formTit"><label for="limitDay1" class="">조회기간</label></td>
                                <td class="radioTd">
                                    <input type="radio" name="limitDay" id="limitDay1" th:checked="${params.limitDay == 1}" value="1"><label for="limitDay1">하루</label>
                                    <input type="radio" name="limitDay" id="limitDay2" th:checked="${params.limitDay == 7}" value="7"><label for="limitDay2">일주일</label>
                                    <input type="radio" name="limitDay" id="limitDay3" th:checked="${params.limitDay == 30}" value="30"><label for="limitDay3">한달</label>
                                </td>
                                <td class="formTit"><label for="pageSize" class="">페이지당 출력행수</label></td>
                                <td>
                                    <select name="pageSize" id="pageSize">
                                        <option value="30" th:selected="${params.pageSize == 30}">30개</option>
                                        <option value="50" th:selected="${params.pageSize == 50}">50개</option>
                                        <option value="100" th:selected="${params.pageSize == 100}">100개</option>
                                    </select>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="formSear">
                        <a href="javascript:goSearch();" class="aBtn">검색</a>
                    </div>
                </form>
            </div>
            <div class="tableBtn-box">
                <div class="leftBox">
                </div>
                <div class="rightBox">
                    <a href="/a8/p1-write" class="a-btn">메시지 전송</a>
                </div>
            </div>
            <table class="adTable smsTable checklist">
                <thead class="adTable-head">
                <tr>
                    <th>번호</th>
                    <!--<th>이름</th>-->
                    <th>내용</th>
                    <th>발송건수</th>
                    <th>전송상태</th>
                    <!--<th>수신번호</th>-->
                    <th>발송일자</th>
                </tr>
                </thead>
                <tbody class="adTable-body sms-body">
                <tr th:each="el : ${data['result']['list']}">
                    <td th:text="${(params.page*params.pageSize)-(params.pageSize-elStat.count)}"></td>
                    <!--<td>김잇플</td>-->
                    <td th:text="${el['msg']}">메시지 내용 메시지 내용 메시지 내용 메시지 내용 메시지 내용메시지 내용 메시지 내용 메시지 내용 메시지 내용 메시지 내용</td>
                    <td th:text="${el['sms_count']}">3</td>
                    <td th:text="${el['reserve_state']}">전송완료</td>
                    <!--<td th:text="${el['sender']}">010-1234-5678</td>-->
                    <td th:text="${el['reg_date']}">2022.09.16</td>
                    <input type="hidden" name="id" th:value="${elStat.count}"/>
                    <input type="hidden" name="mid" th:id="|mid${elStat.count}|" th:value="${el['mid']}"/>
                    <input type="hidden" name="msg" th:id="|msg${elStat.count}|" th:value="${el['msg']}"/>
                </tr>
                </tbody>
            </table>
        </div>
        <ul class="pagination pagi2">
            <li class="page-arrow" th:if="${params.page > 1}"><a class="page-link p-L1" th:href="|/a8/p1?page=${params.page-1}|">이전</a></li>
            <li class="page-arrow" th:if="${#strings.equals(data.get('result').get('next_yn'),'Y')}"><a class="page-link p-R1" th:href="|/a8/p1?page=${params.page+1}|">다음</a></li>
        </ul>
    </div>
    <div class="modal" id="smsModal">
        <div class="modal-bg"></div>
        <div class="modalContent xs sms-modal">
            <div class="modalHd">
                <h3></h3>
                <button class="modalClose"></button>
            </div>
            <div class="modalBody payMo">
                <!--내용-->

            </div>
        </div>
    </div>
    <script th:src="@{/assets/js/a8/a8p1.js(v='1.0.0')}"></script>
    <script th:inline="javascript">
        $(".datepicker").datepicker({
            format: "yyyy-mm-dd",
            language: "ko",
            orientation: "auto"
        });
        $('.smsTable tbody tr').on('click', function () {
            var id = $(this).find("input[name=id]").val();
            goAction("P1", id);
        });
        $(document).on("click", ".modalClose, .modalOff, .modal-bg", function(){
            $(this).parents('.modal').removeClass('on');
        })

        function goWrite(){
            location.href="/a7/p1-write?academyType="+[[${params.academyType}]];
        }
    </script>
</th:block>
</body>
</html>




