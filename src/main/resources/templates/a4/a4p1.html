<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="layout/admin/layout">
<head>
  <title>잇플 출결관리</title>
</head>
<body class="adminBody">
<th:block layout:fragment="content">
  <div class="adContent">
    <div class="contHd">
      <h1 class="adH1">출결관리</h1>
      <a href="" class="attendBtn">출석 페이지로</a>
    </div>
    <div class="content-in clearfix">
      <div class="adSearch clearfix selSearch">
        <form action="" class="adSearch-in">
          <div class="in-box">
            <select name="class" id="class" class="selClass">
              <option value="1">잇플 코딩입문반A</option>
              <option value="2">잇플 코딩입문반B</option>
            </select>
            <select name="year" id="year">
              <option value="2022">2022</option>
              <option value="2021">2021</option>
            </select>
            <select name="month" id="month">
              <option value="1월">1월</option>
              <option value="2월">2월</option>
              <option value="3월">3월</option>
              <option value="4월">4월</option>
              <option value="5월">5월</option>
              <option value="6월">6월</option>
              <option value="7월">7월</option>
              <option value="8월">8월</option>
              <option value="9월">9월</option>
              <option value="10월">10월</option>
              <option value="11월">11월</option>
              <option value="12월">12월</option>
            </select>
          </div>
          <button type="button" class="src-btn"></button>
        </form>
      </div>
      <div class="subTit">
        <p class="className">2022년 3월 잇플 코딩입문반A</p>
      </div>
      <table id="calendar" class="calendar">
        <thead class="calendar-head"></thead>
        <tbody class="calendar-body"></tbody>
      </table>
    </div>
    <ul class="pagination">
      <li class="page-arrow"><a class="page-link p-L2" href="#"></a></li>
      <li class="page-arrow"><a class="page-link p-L1" href="#"></a></li>
      <li class="page-item"><a class="page-link active" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item"><a class="page-link" href="#">4</a></li>
      <li class="page-item"><a class="page-link" href="#">5</a></li>
      <li class="page-item"><a class="page-link" href="#">6</a></li>
      <li class="page-item"><a class="page-link" href="#">7</a></li>
      <li class="page-item"><a class="page-link" href="#">8</a></li>
      <li class="page-item"><a class="page-link" href="#">9</a></li>
      <li class="page-item"><a class="page-link" href="#">10</a></li>
      <li class="page-arrow"><a class="page-link p-R1" href="#"></a></li>
      <li class="page-arrow"><a class="page-link p-R2" href="#"></a></li>
    </ul>
  </div>
  <script th:src="@{/assets/js/a4/a4p1.js(v='1.0.0')}"></script>
  <script th:inline="javascript">
    function buildCalendar() {
      var today = new Date();
      var date = new Date();
      var student = new Array('김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플', '김잇플');
      var nowClass = "잇플 코딩입문반A"

      nowYear = today.getFullYear();
      nowMonth = today.getMonth();
      firstDate = new Date(nowYear,nowMonth,1).getDate();
      firstDay = new Date(nowYear,nowMonth,1).getDay(); //1st의 요일
      lastDate = new Date(nowYear,nowMonth+1,0).getDate();

      if((nowYear%4===0 && nowYear % 100 !==0) || nowYear%400===0) { //윤년 적용
        lastDate[1]=29;
      }
      $(".className").text(nowYear+"년 "+(nowMonth+1)+"월 "+nowClass);//제목 생성

      $("#calendar thead").append("<tr><th></th></tr>");//thead 넣기
      for (i=1; i <=lastDate; i++){ // 날짜 채우기
        plusDate = new Date(nowYear,nowMonth,i).getDay();
        if (plusDate==0 || plusDate==6) {
          $("#calendar thead tr:last").append("<th class='holliday' id='date" + i + "'>"+ i +"</th>");
        }else{
          $("#calendar thead tr:last").append("<th class='date' id='date" + i + "'>"+ i +"</th>");
        }

      }

      for(i=0; i<student.length; i++){
        $("#calendar tbody").append("<tr><td>"+ student[i] +"</td></tr>");//학생 목록 생성
        for (t=1; t <=lastDate; t++){ // 날짜 채우기
          plusDate = new Date(nowYear,nowMonth,t).getDay();
          if (plusDate==0 || plusDate==6) {
            $("#calendar tbody tr:last").append("<td class='holiday' id='"+i+"date" + t + "'></td>");
          }else{
            $("#calendar tbody tr:last").append("<td class='date' id='"+i+"date" + t + "'></td>");
          }
        }
      }
    }
    buildCalendar();
    $("#0date2, #2date2, #3date2, #4date2, #5date2, #6date2, #7date2, #8date2, #9date2, #10date2, #11date2").addClass("present");
    $("#1date2, #12date2, #13date2").addClass("absent");
  </script>
</th:block>
</body>
</html>